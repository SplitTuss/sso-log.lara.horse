(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{92:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return r(5890)}])},2386:(e,t,r)=>{"use strict";let n;r.d(t,{y:()=>w,G:()=>v});var o=r(7876),a=r(4232);let s={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},l=new Uint8Array(16),i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));let c=function(e,t,r){if(s.randomUUID&&!t&&!e)return s.randomUUID();let o=(e=e||{}).random??e.rng?.()??function(){if(!n){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");n=crypto.getRandomValues.bind(crypto)}return n(l)}();if(o.length<16)throw Error("Random bytes length must be >= 16");if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){if((r=r||0)<0||r+16>t.length)throw RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=o[e];return t}return function(e,t=0){return(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase()}(o)},u="horseOwners",d={ACCOUNT:"account",HORSE_OWNER:"horseOwner"},p={OBJECT_TYPE:{name:"objectTypeIndex",key:"objectType"},HORSE_ID:{name:"horseIdIndex",key:"horseId"},ACCOUNT_ID:{name:"accountIdIndex",key:"accountId"}},m=()=>new Promise((e,t)=>{let r=indexedDB.open("ssoLog",2);r.onupgradeneeded=e=>{var t,r;let n=e.target,o=null==n?void 0:n.result;(null==o||null==(t=o.objectStoreNames)?void 0:t.contains(u))||null==o||o.createObjectStore(u,{keyPath:"id"});let a=null==n||null==(r=n.transaction)?void 0:r.objectStore(u);Object.values(p).forEach(e=>{let{name:t,key:r}=e;(null==a?void 0:a.indexNames.contains(t))||null==a||a.createIndex(t,r,{unique:!1,multiEntry:!1})})},r.onsuccess=t=>{let r=t.target;e(null==r?void 0:r.result)},r.onerror=e=>{let r=e.target;t("Error opening database: "+(null==r?void 0:r.error))}}),h=e=>{let{db:t,data:r}=e;if(!t)return;let n=t.transaction(u,"readwrite").objectStore(u).add({id:c(),...r});return new Promise((e,t)=>{n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error)})},f=e=>{let{db:t,data:r}=e;if(!t)return;let n=t.transaction(u,"readwrite").objectStore(u).put(r);return new Promise((e,t)=>{n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error)})},y=e=>{let{db:t,id:r}=e;if(!t)return;let n=t.transaction(u,"readwrite").objectStore(u).delete(r);return new Promise((e,t)=>{n.onsuccess=()=>e(!0),n.onerror=()=>t(!1)})},b=e=>{let{db:t,indexName:r,value:n}=e;if(!t)return;let o=t.transaction(u,"readonly").objectStore(u).index(r).getAll(IDBKeyRange.only(n));return new Promise((e,t)=>{o.onsuccess=()=>e(o.result),o.onerror=()=>t(o.error)})},g=e=>{let{db:t}=e;if(t)try{let e=t.transaction([u],"readonly").objectStore(u).getAll();return new Promise((t,r)=>{e.onsuccess=()=>{let r=e.result,n=JSON.stringify(r,null,2),o=new Blob([n],{type:"application/json"}),a=URL.createObjectURL(o),s=document.createElement("a");s.href=a,s.download="sso-log-export.json",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a),t()},e.onerror=e=>r(e)})}catch(e){console.error("Error during export:",e)}},x=async e=>{let{db:t,file:r}=e;if(t)try{let e=JSON.parse(r);if(!Array.isArray(e))throw Error("JSON data should be an array");let n=t.transaction([u],"readwrite").objectStore(u);for(let t of(await n.clear(),e))await n.put(t)}catch(e){console.error("Error during export:",e)}},j=(0,a.createContext)({db:null,error:null,accounts:null,horseOwners:null,addAccount:()=>Promise.resolve(void 0),updateAccount:()=>Promise.resolve(void 0),addHorseOwner:()=>Promise.resolve(void 0),updateHorseOwner:()=>Promise.resolve(void 0),removeData:()=>Promise.resolve(void 0),refetchData:()=>Promise.resolve(void 0),exportToFile:()=>Promise.resolve(void 0),importFromFile:()=>Promise.resolve(void 0)}),v=()=>{let e=(0,a.useContext)(j);if(!e)throw Error("useDb must be used within a DbProvider");return e},w=e=>{let{children:t}=e,[r,n]=(0,a.useState)(null),[s,l]=(0,a.useState)(null),[i,c]=(0,a.useState)(null),[u,v]=(0,a.useState)(null),w=(0,a.useCallback)(async()=>{let[e,t]=await Promise.all([b({db:r,indexName:p.OBJECT_TYPE.name,value:d.ACCOUNT}),b({db:r,indexName:p.OBJECT_TYPE.name,value:d.HORSE_OWNER})]);Array.isArray(e)&&c(e),Array.isArray(t)&&v(t)},[r]);(0,a.useEffect)(()=>{i||u||w()},[i,u,w]),(0,a.useEffect)(()=>{m().then(n).catch(l)},[]);let E=(0,a.useCallback)(async e=>h({db:r,data:{[p.OBJECT_TYPE.key]:d.ACCOUNT,...e}}),[r]),C=(0,a.useCallback)(async e=>f({db:r,data:{[p.OBJECT_TYPE.key]:d.ACCOUNT,...e}}),[r]),k=(0,a.useCallback)(async e=>h({db:r,data:{[p.OBJECT_TYPE.key]:d.HORSE_OWNER,...e}}),[r]),O=(0,a.useCallback)(async e=>f({db:r,data:{[p.OBJECT_TYPE.key]:d.HORSE_OWNER,...e}}),[r]),P=(0,a.useCallback)(async e=>y({db:r,id:e}),[r]),S=(0,a.useCallback)(async()=>g({db:r}),[r]),_=(0,a.useCallback)(async e=>x({db:r,file:e}),[r]);return(0,o.jsx)(j.Provider,{value:{db:r,error:s,accounts:i,horseOwners:u,addAccount:E,updateAccount:C,addHorseOwner:k,updateHorseOwner:O,removeData:P,refetchData:w,exportToFile:S,importFromFile:_},children:t})}},5890:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(7876),o=r(7328),a=r.n(o);r(9334);var s=r(2386);let l={url:"https://sso-log.lara.horse",name:"SSO-log.lara.horse",description:"log all your SSO horses",themeColor:"#7f22fe",backgroundColor:"#0a0a0a"};function i(e){let{Component:t,pageProps:r}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a(),{children:[(0,n.jsx)("title",{children:"sso-log.lara.horse"}),(0,n.jsx)("meta",{name:"description",content:"Generated by Julie Eveningrock"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon-196.png"}),(0,n.jsx)("meta",{name:"viewport",content:"minimum-scale=1, initial-scale=1, width=device-width, shrink-to-fit=no, user-scalable=no, viewport-fit=cover"}),(0,n.jsx)("meta",{name:"application-name",content:l.name}),(0,n.jsx)("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),(0,n.jsx)("meta",{name:"apple-mobile-web-app-status-bar-style",content:"default"}),(0,n.jsx)("meta",{name:"apple-mobile-web-app-title",content:l.name}),(0,n.jsx)("meta",{name:"description",content:l.description}),(0,n.jsx)("meta",{name:"format-detection",content:"telephone=no"}),(0,n.jsx)("meta",{name:"mobile-web-app-capable",content:"yes"}),(0,n.jsx)("meta",{name:"msapplication-config",content:"/icons/browserconfig.xml"}),(0,n.jsx)("meta",{name:"msapplication-TileColor",content:l.themeColor}),(0,n.jsx)("meta",{name:"msapplication-tap-highlight",content:"no"}),(0,n.jsx)("meta",{name:"theme-color",content:l.backgroundColor}),(0,n.jsx)("link",{rel:"apple-touch-icon",href:"/icons/touch-icon-iphone.png"}),(0,n.jsx)("link",{rel:"apple-touch-icon",sizes:"152x152",href:"/icons/touch-icon-ipad.png"}),(0,n.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/icons/touch-icon-iphone-retina.png"}),(0,n.jsx)("link",{rel:"apple-touch-icon",sizes:"167x167",href:"/icons/touch-icon-ipad-retina.png"}),(0,n.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/icons/favicon-196.png"}),(0,n.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/icons/favicon-196.png"}),(0,n.jsx)("link",{rel:"manifest",href:"/manifest.json"}),(0,n.jsx)("link",{rel:"mask-icon",href:"/icons/safari-pinned-tab.svg",color:l.themeColor}),(0,n.jsx)("link",{rel:"shortcut icon",href:"/favicon-196.png"}),(0,n.jsx)("meta",{property:"og:type",content:"website"}),(0,n.jsx)("meta",{property:"og:title",content:l.name}),(0,n.jsx)("meta",{property:"og:site_name",content:l.name}),(0,n.jsx)("meta",{property:"og:description",content:l.description}),(0,n.jsx)("meta",{property:"og:url",content:l.url}),(0,n.jsx)("meta",{property:"og:image",content:"".concat(l.url,"/icons/apple-touch-icon.png")})]}),(0,n.jsx)("main",{children:(0,n.jsx)(s.y,{children:(0,n.jsx)(t,{...r})})})]})}},7328:(e,t,r)=>{e.exports=r(9836)},9334:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[593,792],()=>(t(92),t(8253))),_N_E=e.O()}]);