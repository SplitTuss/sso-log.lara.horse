(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{92:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return t(5890)}])},2386:(e,r,t)=>{"use strict";let o;t.d(r,{y:()=>C,G:()=>w});var n=t(7876),a=t(4232);let l={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},s=new Uint8Array(16),i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));let u=function(e,r,t){if(l.randomUUID&&!r&&!e)return l.randomUUID();let n=(e=e||{}).random??e.rng?.()??function(){if(!o){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");o=crypto.getRandomValues.bind(crypto)}return o(s)}();if(n.length<16)throw Error("Random bytes length must be >= 16");if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,r){if((t=t||0)<0||t+16>r.length)throw RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let e=0;e<16;++e)r[t+e]=n[e];return r}return function(e,r=0){return(i[e[r+0]]+i[e[r+1]]+i[e[r+2]]+i[e[r+3]]+"-"+i[e[r+4]]+i[e[r+5]]+"-"+i[e[r+6]]+i[e[r+7]]+"-"+i[e[r+8]]+i[e[r+9]]+"-"+i[e[r+10]]+i[e[r+11]]+i[e[r+12]]+i[e[r+13]]+i[e[r+14]]+i[e[r+15]]).toLowerCase()}(n)},c="horseOwners",d={ACCOUNT:"account",HORSE_OWNER:"horseOwner"},y={OBJECT_TYPE:{name:"objectTypeIndex",key:"objectType"},HORSE_ID:{name:"horseIdIndex",key:"horseId"},ACCOUNT_ID:{name:"accountIdIndex",key:"accountId"}},m=()=>new Promise((e,r)=>{let t=indexedDB.open("ssoLog",2);t.onupgradeneeded=e=>{var r,t;let o=e.target,n=null==o?void 0:o.result;(null==n||null==(r=n.objectStoreNames)?void 0:r.contains(c))||null==n||n.createObjectStore(c,{keyPath:"id"});let a=null==o||null==(t=o.transaction)?void 0:t.objectStore(c);Object.values(y).forEach(e=>{let{name:r,key:t}=e;(null==a?void 0:a.indexNames.contains(r))||null==a||a.createIndex(r,t,{unique:!1,multiEntry:!1})})},t.onsuccess=r=>{let t=r.target;e(null==t?void 0:t.result)},t.onerror=e=>{let t=e.target;r("Error opening database: "+(null==t?void 0:t.error))}}),p=e=>{let{db:r,data:t}=e;if(!r)return;let o=r.transaction(c,"readwrite").objectStore(c).add({id:u(),...t});return new Promise((e,r)=>{o.onsuccess=()=>e(o.result),o.onerror=()=>r(o.error)})},f=e=>{let{db:r,data:t}=e;if(!r)return;let o=r.transaction(c,"readwrite").objectStore(c).put(t);return new Promise((e,r)=>{o.onsuccess=()=>e(o.result),o.onerror=()=>r(o.error)})},b=e=>{let{db:r,id:t}=e;if(!r)return;let o=r.transaction(c,"readwrite").objectStore(c).delete(t);return new Promise((e,r)=>{o.onsuccess=()=>e(!0),o.onerror=()=>r(!1)})},E=e=>{let{db:r,indexName:t,value:o}=e;if(!r)return;let n=r.transaction(c,"readonly").objectStore(c).index(t).getAll(IDBKeyRange.only(o));return new Promise((e,r)=>{n.onsuccess=()=>e(n.result),n.onerror=()=>r(n.error)})},h=e=>{let{db:r}=e;if(r)try{let e=r.transaction([c],"readonly").objectStore(c).getAll();return new Promise((r,t)=>{e.onsuccess=()=>{let t=e.result,o=JSON.stringify(t,null,2),n=new Blob([o],{type:"application/json"}),a=URL.createObjectURL(n),l=document.createElement("a");l.href=a,l.download="sso-log-export.json",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a),r()},e.onerror=e=>t(e)})}catch(e){console.error("Error during export:",e)}},v=async e=>{let{db:r,file:t}=e;if(r)try{let e=JSON.parse(t);if(!Array.isArray(e))throw Error("JSON data should be an array");let o=r.transaction([c],"readwrite").objectStore(c);for(let r of(await o.clear(),e))await o.put(r)}catch(e){console.error("Error during export:",e)}},O=(0,a.createContext)({db:null,error:null,accounts:null,horseOwners:null,addAccount:()=>Promise.resolve(void 0),updateAccount:()=>Promise.resolve(void 0),addHorseOwner:()=>Promise.resolve(void 0),updateHorseOwner:()=>Promise.resolve(void 0),removeData:()=>Promise.resolve(void 0),refetchData:()=>Promise.resolve(void 0),exportToFile:()=>Promise.resolve(void 0),importFromFile:()=>Promise.resolve(void 0)}),w=()=>{let e=(0,a.useContext)(O);if(!e)throw Error("useDb must be used within a DbProvider");return e},C=e=>{let{children:r}=e,[t,o]=(0,a.useState)(null),[l,s]=(0,a.useState)(null),[i,u]=(0,a.useState)(null),[c,w]=(0,a.useState)(null),C=(0,a.useCallback)(async()=>{let[e,r]=await Promise.all([E({db:t,indexName:y.OBJECT_TYPE.name,value:d.ACCOUNT}),E({db:t,indexName:y.OBJECT_TYPE.name,value:d.HORSE_OWNER})]);Array.isArray(e)&&u(e),Array.isArray(r)&&w(r)},[t]);(0,a.useEffect)(()=>{i||c||C()},[i,c,C]),(0,a.useEffect)(()=>{m().then(o).catch(s)},[]);let g=(0,a.useCallback)(async e=>p({db:t,data:{[y.OBJECT_TYPE.key]:d.ACCOUNT,...e}}),[t]),P=(0,a.useCallback)(async e=>f({db:t,data:{[y.OBJECT_TYPE.key]:d.ACCOUNT,...e}}),[t]),j=(0,a.useCallback)(async e=>p({db:t,data:{[y.OBJECT_TYPE.key]:d.HORSE_OWNER,...e}}),[t]),_=(0,a.useCallback)(async e=>f({db:t,data:{[y.OBJECT_TYPE.key]:d.HORSE_OWNER,...e}}),[t]),x=(0,a.useCallback)(async e=>b({db:t,id:e}),[t]),k=(0,a.useCallback)(async()=>h({db:t}),[t]),T=(0,a.useCallback)(async e=>v({db:t,file:e}),[t]);return(0,n.jsx)(O.Provider,{value:{db:t,error:l,accounts:i,horseOwners:c,addAccount:g,updateAccount:P,addHorseOwner:j,updateHorseOwner:_,removeData:x,refetchData:C,exportToFile:k,importFromFile:T},children:r})}},5890:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});var o=t(7876),n=t(7328),a=t.n(n);t(9334);var l=t(2386);function s(e){let{Component:r,pageProps:t}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(a(),{children:[(0,o.jsx)("title",{children:"sso-log.lara.horse"}),(0,o.jsx)("meta",{name:"description",content:"Generated by Julie Eveningrock"}),(0,o.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,o.jsx)("main",{children:(0,o.jsx)(l.y,{children:(0,o.jsx)(r,{...t})})})]})}},7328:(e,r,t)=>{e.exports=t(9836)},9334:()=>{}},e=>{var r=r=>e(e.s=r);e.O(0,[593,792],()=>(r(92),r(8253))),_N_E=e.O()}]);